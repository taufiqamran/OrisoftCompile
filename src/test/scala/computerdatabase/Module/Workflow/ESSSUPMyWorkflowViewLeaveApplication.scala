package computerdatabase.Module.Workflow

import io.gatling.core.Predef._
import io.gatling.http.Predef._
import scala.concurrent.duration._

object ESSSUPMyWorkflowViewLeaveApplication {

  val uri1 = "https://maps.googleapis.com/maps/api/js"
  val uri3 = "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/fonts/fontawesome-webfont.woff2"
  val uri4 = "https://fonts.googleapis.com/css"

  def loadApplication = {
    exec(http("Load My Workflow")
      .get("/works/request_lst.aspx")
      //check and save body, and save viewstate
      .check(status.is(200))
      .check(bodyString.saveAs("TableLeave"))
      .check(regex("""<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="(|.+?)" />""").saveAs("viewStateTable"))
    )
      .exec(http("request_52")
        .get(uri4 + "?family=Open+Sans:300,400,600,700")
      )
      .exec(http("request_53")
        .get(uri4 + "?family=Roboto:400,300,500,700")
      )
      .exec(http("request_54")
        .get("/WebResource.axd?d=pynGkmcFUV13He1Qd6_TZOYXOnLy43dRx8HCf3vqtm7Uk9Dd5QTT0bKPZkChPJpkGd7et7925jgqVFYijtH4BlZm86YPMFKavMb3jiNdHO_DkODjc9ASxqTpYjlOyMlE0&t=637505973787431984")
      )
      .exec(http("request_55")
        .get("/ScriptResource.axd?d=x6wALODbMJK5e0eRC_p1LTFBEqAduy6yzdGuAMP1dHrya3_IF2A8CsbaRF-ARwHq6m-SGT1rW_kEfDOVxpLiOwBwjQzZMYd6yIJvZ9ubgIyIzxTTWWPxLOJ6h2brQiXEeYW7vHWkdtbfdWvIHio91FSsDXmcUmI7kjdMETOH_XE1&t=51e37521")
      )
      .exec(http("request_56")
        .get("/ScriptResource.axd?d=P5lTttoqSeZXoYRLQMIScIf12FcrWAiNVtlJxQA9qnTW6iJpMmht7uXNg23QNwOPVke9qF6NTd062q-kq39p4MmkxhZ1ti3ckmNVSJHDik9HIeiTEBJ8AeazBYyjXlRbQWV2Q8-MBT7ldJqGwC6gtX5XcIt2Wd4nEFDQxuD-poI1&t=51e37521")
      )
      .exec(http("request_57")
        .get("/ScriptResource.axd?d=XGoPW3Unw0ILT0eb9sSUayB1PCvz0eeMXm23ajXUnLKSVWvpEIM7qNdgqQtwIk3oGSO-umSPRJr1BQNhALudg4-gDqI9ltlNkOQMrPf4fNHBEAhja6GHf4He4_YSEbkQ4L1Bsn1aV_AF11ks4fQlTNxlg6tYk_UGpXjfNcFSD6D49VS2gjNTnElk4fHlLsM90&t=51e37521")
      )
      .exec(http("request_58")
        .get("/ScriptResource.axd?d=uvA9ANM76Fbpm1FfUlagnYp2obqkhmwI_C-NoQ89dB6TwrO7THFVAk1nHl1QRi68J_pozjXYUJHgZb6l02O3dvVqjaOzdIW44mTvv4FyAQ5MvnVeKZmB7OtG9BNkATLGOGWXvK2djBpsGpZ_x3Mi2KdwGSD0SZeW5VvD940G1Y8Cml0nm6ok2UFWSXa6k4SQ0&t=51e37521")
      )
      .exec(http("request_59")
        .post("/verify_access.ashx")
      )
      .exec(http("request_60")
        .get("/works/request_lst.aspx?_TSM_CombinedScripts_=True&v=ZaMfZ6yYhPPHZ1NeEf8j6-t902-6pHpn2MehV0eep-I1&_TSM_Bundles_=&cdn=False")
      )
      .pause(100.milliseconds)
      .exec(http("request_61")
        .get("/Content/ESS/fonts/icomoon.ttf?5vru0d")
      )
      .exec(http("request_62")
        .get("/Notifications/GetNotificationCounts")
      )
      .exec(http("request_63")
        .get("/Account/VerifyAccess")
      )
      .exec(http("request_64")
        .get("/Notifications/ViewNotifications?type=FFF1LrZaaw4+trQe0TmMq/K7ATwaaflMro/xHFO/5d6cjaMIPK/NxXtEU9uuiON/VQ9UumleQ6ZL/YICE5APGNsVZeRApaXzti2bWDDZ9EpwCjOuZZ5jVj20Hna6XWS1MnT5oKg4xAFh3IO/G9NMZzbnLoUMKQOnVr8WMd65VIY=")
      )
      .exec(http("request_65")
        .get(uri3 + "?v=4.7.0")
      )
      .exec(http("request_66")
        .get("/Account/VerifyAccess")
      )
      .exec(http("request_67")
        .get("/Notifications/GetNotificationsList?row=8")
      )
      .pause(5)
  }

  def searchLA = {
    exec(http("Search Leave Application")
      .post("/works/request_lst.aspx")

      .formParam("__EVENTTARGET", "ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$gvSearch$ctl03$ctl00")
      .formParam("__EVENTARGUMENT", "")
      .formParam("_TSM_HiddenField_", "ZaMfZ6yYhPPHZ1NeEf8j6-t902-6pHpn2MehV0eep-I1")
      .formParam("__VIEWSTATE", "${viewStateTable}")
      .formParam("__VIEWSTATEGENERATOR", "197FAB68")
      .formParam("ctl00$ctl00$ctl00$selCultureName", "")
      .formParam("ctl00$ctl00$ctl00$selCountry", "1")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$hfMode", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$hfStatus", "[P]")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$txtRequestID", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$selActionType", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$txtRequestorName", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$selRequestType", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$txtDateFrom", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$txtDateTo", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$txtStatus", "Pending")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$cbStatus$0", "P")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$gvSearch$ctl08$gpCustomPager$txtPageSize", "50")
      .check(status.is(302)))

      //change value here (after the "value=")
      .exec(http("request_69")
        .get("/request/leave_form.aspx?Value=3c56414c55453e3c4147454e5449443e31333932323c2f4147454e5449443e3c47524f55504147454e5449443e31333932323c2f47524f55504147454e5449443e3c414354494f4e5f545950453e523c2f414354494f4e5f545950453e3c4d4f4e49544f525f49443e3137333034373c2f4d4f4e49544f525f49443e3c534d4f44453e503c2f534d4f44453e3c444154415345543e6c656176656170706c69636174696f6e3c2f444154415345543e3c524551554553544f525f49443e393132363c2f524551554553544f525f49443e3c2f56414c55453e")
        .check(bodyString.saveAs("IDLeave"))
      )
      .exec(http("request_70")
        .get("/DXR.axd?r=0_2312,1_50,1_53,1_51,0_2317-4WXkk")
      )
      .exec(http("request_71")
        .get(uri4 + "?family=Open+Sans:300,400,600,700")
      )
      .exec(http("request_72")
        .get(uri4 + "?family=Roboto:400,300,500,700")
      )
      .exec(http("request_73")
        .get("/WebResource.axd?d=G7AEkw1asyYfSFk2Li5D0JhwAppflyxkpGSQDQbA3YX7Us59q1SeSvJlGoBadgH42WWogzokgjSTil628NjzJ-ho-6akTSnjNL_1W4rKMdV6J4E7SFdllL-EXlbUGTEk-wfRgTKBSFluXwws9OgQSz64mOsqxEoa9Z9MfmluHcdALHev8eL9dk6DjmuJdzHl0&t=637182269363078774")
      )
      .exec(http("request_74")
        .get("/WebResource.axd?d=pynGkmcFUV13He1Qd6_TZOYXOnLy43dRx8HCf3vqtm7Uk9Dd5QTT0bKPZkChPJpkGd7et7925jgqVFYijtH4BlZm86YPMFKavMb3jiNdHO_DkODjc9ASxqTpYjlOyMlE0&t=637505973787431984")
      )
      .exec(http("request_75")
        .get("/ScriptResource.axd?d=nv7asgRUU0tRmHNR2D6t1HncJC0uSlzSoOMFzQL9KDgdtj1yUByaaYlMWCLR1tfb0zRr2KS8GU92MXS6P0lOX_vkDPQOiW6UvV384GibJ__q8DVUhGPtg7X0IEAXecIS6jMaZIGfhYY2bHennMwScvTacu4aYi7pwkjCfDx4XDhghn49oiHENcEjRtCYLFUt0&t=fffffffff6474071")
      )
      .exec(http("request_76")
        .get("/ScriptResource.axd?d=x6wALODbMJK5e0eRC_p1LTFBEqAduy6yzdGuAMP1dHrya3_IF2A8CsbaRF-ARwHq6m-SGT1rW_kEfDOVxpLiOwBwjQzZMYd6yIJvZ9ubgIyIzxTTWWPxLOJ6h2brQiXEeYW7vHWkdtbfdWvIHio91FSsDXmcUmI7kjdMETOH_XE1&t=51e37521")
      )
      .exec(http("request_77")
        .get("/ScriptResource.axd?d=P5lTttoqSeZXoYRLQMIScIf12FcrWAiNVtlJxQA9qnTW6iJpMmht7uXNg23QNwOPVke9qF6NTd062q-kq39p4MmkxhZ1ti3ckmNVSJHDik9HIeiTEBJ8AeazBYyjXlRbQWV2Q8-MBT7ldJqGwC6gtX5XcIt2Wd4nEFDQxuD-poI1&t=51e37521")
      )
      .exec(http("request_78")
        .get("/ScriptResource.axd?d=XGoPW3Unw0ILT0eb9sSUayB1PCvz0eeMXm23ajXUnLKSVWvpEIM7qNdgqQtwIk3oGSO-umSPRJr1BQNhALudg4-gDqI9ltlNkOQMrPf4fNHBEAhja6GHf4He4_YSEbkQ4L1Bsn1aV_AF11ks4fQlTNxlg6tYk_UGpXjfNcFSD6D49VS2gjNTnElk4fHlLsM90&t=51e37521")
      )
      .exec(http("request_79")
        .get("/ScriptResource.axd?d=uvA9ANM76Fbpm1FfUlagnYp2obqkhmwI_C-NoQ89dB6TwrO7THFVAk1nHl1QRi68J_pozjXYUJHgZb6l02O3dvVqjaOzdIW44mTvv4FyAQ5MvnVeKZmB7OtG9BNkATLGOGWXvK2djBpsGpZ_x3Mi2KdwGSD0SZeW5VvD940G1Y8Cml0nm6ok2UFWSXa6k4SQ0&t=51e37521")
      )
      .exec(http("request_80")
        .post("/verify_access.ashx")
      )
      .exec(http("request_81")
        .get("/request/leave_form.aspx?_TSM_CombinedScripts_=True&v=ZaMfZ6yYhPPHZ1NeEf8j6-t902-6pHpn2MehV0eep-I1&_TSM_Bundles_=&cdn=False")
      )
      .exec(http("request_82")
        .get("/DXR.axd?r=1_58-lUXkk")
      )
      .exec(http("request_83")
        .get("/Content/ESS/fonts/icomoon.ttf?5vru0d")
      )
      .exec(http("request_84")
        .get(uri3 + "?v=4.7.0")
      )
      .exec(http("request_85")
        .get("/DXR.axd?r=1_303,1_184,1_297,1_210,1_220,1_187,1_181,1_289,1_287-lUXkk")
      )
      .pause(187.milliseconds)
      .exec(http("request_86")
        .get("/Notifications/GetNotificationCounts")
      )
      .exec(http("request_87")
        .get("/Account/VerifyAccess")
      )
      .exec(http("request_88")
        .get("/Notifications/ViewNotifications?type=hTh9r/zAsF0tmqY8vtoP/JpKo5myw9u7OmjpIKE2n9sbWMb9yY1zL9S+6m9pFY5wBh1YXvxqACwMr5sZwhh31kN7YLwSglZ+bqJXIC7PwSxfOStU2NFNLtg+5KbhxdnCc/tTKMXIl6Rdx7DVWmP1q9YgU0crOZOcXxPrqsDk6SA=")
      )
      .exec(http("request_89")
        .get("/Account/VerifyAccess")
      )
      .exec(http("request_90")
        .get("/Notifications/GetNotificationsList?row=8")
      )

      // leave view
      .exec(http("request_91")
        .post("/request/get_leave_reason.ashx")

        .formParam("LeaveType", "A")
        .formParam("EmployeeID", "")
        .formParam("EmploymentID", "9126")
        .formParam("EmployeeNo", "")
        .formParam("StartDate", "undefined 00:00")
        .formParam("EndDate", "undefined 00:00")
        .formParam("LocationID", "9"))
      .pause(2)
  }

  def viewList = {
    exec(http("Leave View")
      .get("/works/request_lst.aspx")
      .check(bodyString.saveAs("LeaveView"))
    )
      .exec(http("request_93")
        .get(uri4 + "?family=Open+Sans:300,400,600,700")
      )
      .exec(http("request_94")
        .get(uri4 + "?family=Roboto:400,300,500,700")
      )
      .exec(http("request_95")
        .get("/WebResource.axd?d=pynGkmcFUV13He1Qd6_TZOYXOnLy43dRx8HCf3vqtm7Uk9Dd5QTT0bKPZkChPJpkGd7et7925jgqVFYijtH4BlZm86YPMFKavMb3jiNdHO_DkODjc9ASxqTpYjlOyMlE0&t=637505973787431984")
      )
      .exec(http("request_96")
        .get("/ScriptResource.axd?d=x6wALODbMJK5e0eRC_p1LTFBEqAduy6yzdGuAMP1dHrya3_IF2A8CsbaRF-ARwHq6m-SGT1rW_kEfDOVxpLiOwBwjQzZMYd6yIJvZ9ubgIyIzxTTWWPxLOJ6h2brQiXEeYW7vHWkdtbfdWvIHio91FSsDXmcUmI7kjdMETOH_XE1&t=51e37521")
      )
      .exec(http("request_97")
        .get("/ScriptResource.axd?d=P5lTttoqSeZXoYRLQMIScIf12FcrWAiNVtlJxQA9qnTW6iJpMmht7uXNg23QNwOPVke9qF6NTd062q-kq39p4MmkxhZ1ti3ckmNVSJHDik9HIeiTEBJ8AeazBYyjXlRbQWV2Q8-MBT7ldJqGwC6gtX5XcIt2Wd4nEFDQxuD-poI1&t=51e37521")
      )
      .exec(http("request_98")
        .get("/ScriptResource.axd?d=XGoPW3Unw0ILT0eb9sSUayB1PCvz0eeMXm23ajXUnLKSVWvpEIM7qNdgqQtwIk3oGSO-umSPRJr1BQNhALudg4-gDqI9ltlNkOQMrPf4fNHBEAhja6GHf4He4_YSEbkQ4L1Bsn1aV_AF11ks4fQlTNxlg6tYk_UGpXjfNcFSD6D49VS2gjNTnElk4fHlLsM90&t=51e37521")
      )
      .exec(http("request_99")
        .get("/ScriptResource.axd?d=uvA9ANM76Fbpm1FfUlagnYp2obqkhmwI_C-NoQ89dB6TwrO7THFVAk1nHl1QRi68J_pozjXYUJHgZb6l02O3dvVqjaOzdIW44mTvv4FyAQ5MvnVeKZmB7OtG9BNkATLGOGWXvK2djBpsGpZ_x3Mi2KdwGSD0SZeW5VvD940G1Y8Cml0nm6ok2UFWSXa6k4SQ0&t=51e37521")
      )
      .exec(http("request_100")
        .post("/verify_access.ashx")
      )
      .exec(http("request_101")
        .get("/works/request_lst.aspx?_TSM_CombinedScripts_=True&v=ZaMfZ6yYhPPHZ1NeEf8j6-t902-6pHpn2MehV0eep-I1&_TSM_Bundles_=&cdn=False")
      )
      .exec(http("request_102")
        .get("/Content/ESS/fonts/icomoon.ttf?5vru0d")
      )
      .exec(http("request_103")
        .get(uri3 + "?v=4.7.0")
      )
      .pause(135.milliseconds)
      .exec(http("request_104")
        .get("/Notifications/GetNotificationCounts")
      )
      .exec(http("request_105")
        .get("/Account/VerifyAccess")
      )
      .exec(http("request_106")
        .get("/Notifications/ViewNotifications?type=sheyA2Gg8ymmiHWMn/wuPKAdmev/K+Eof9wXKLRGgYy8RtCuTKRNWNmN2LkLGPOiVjcz/7faWGffPHVfk6a1+P/Cppb9fWpe6VxrXyPYHWSHevBdUcTmDnvN3MJmsPHpR45Z5wCEctU/k/0QA6NdhF0uhq99PUgFrai37FPCPZk=")
      )
      .exec(http("request_107")
        .get("/Account/VerifyAccess")
      )
      .exec(http("request_108")
        .get("/Notifications/GetNotificationsList?row=8")
      )
      .pause(5)
  }

  def logout = {
    exec(http("Submit Logout")
      .post("/works/request_lst.aspx")

      //logout using form
      .formParam("__EVENTTARGET", "ctl00$ctl00$ctl00$lbLogout")
      .formParam("__EVENTARGUMENT", "")
      .formParam("_TSM_HiddenField_", "ZaMfZ6yYhPPHZ1NeEf8j6-t902-6pHpn2MehV0eep-I1")
      .formParam("__VIEWSTATE", "${viewStateTable}")
      .formParam("__VIEWSTATEGENERATOR", "197FAB68")
      .formParam("ctl00$ctl00$ctl00$selCultureName", "")
      .formParam("ctl00$ctl00$ctl00$selCountry", "1")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$hfMode", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$hfStatus", "[P]")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$txtRequestID", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$selActionType", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$txtRequestorName", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$selRequestType", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$txtDateFrom", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$txtDateTo", "")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$txtStatus", "Pending")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$cntPlcHldrCriteria$cbStatus$0", "P")
      .formParam("ctl00$ctl00$ctl00$cntPlcHldrContent$cntPlcHldrContent$gvSearch$ctl08$gpCustomPager$txtPageSize", "50")
      .check(status.is(302)))

      //back to login page
      .exec(http("Load Login Page Part 2")
        .get("/Account/Login")
      )
      .exec(http("request_111")
        .get("/Content/css?v=w9USDPGryprQSMA62T1giyRXrtqAIG-BphxyQY0Qw_w1")
      )
      .exec(http("request_112")
        .get("/DXR.axd?r=1_17,0_2214,1_50,1_53,1_51,1_16,0_2219,0_2312,0_2317-4WXkk")
      )
      .exec(http("request_113")
        .get("/DXR.axd?r=1_303,1_210,1_184,1_220,1_187,1_181,1_279,1_292,1_208,1_216,1_212,1_189,1_222,17_42,1_297,1_215,1_207,1_289,1_205,17_7,1_287,1_211,17_23,1_197,17_1-lUXkk")
      )
      .exec(http("request_114")
        .get("/DXR.axd?r=1_58-lUXkk")
      )
      .exec(http("request_115")
        .get("/bundles/jquery?v=w1vknpWt6KqlZcHeJQvaK6VbvvXt1Go8HcGH_DqKzzo1")
      )
      .pause(104.milliseconds)
      .exec(http("request_116")
        .get("/Content/Images/bg-login.jpg?V=03")
      )
      .exec(http("request_117")
        .get("/Content/fonts/icomoon.ttf?5vru0d")
      )
  }

}
